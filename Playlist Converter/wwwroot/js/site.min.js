(function(){function t(){return new Promise(function(n){OAuthManager.obtainToken({scopes:["playlist-read-private","playlist-modify-public","playlist-modify-private"]}).then(function(t){n(r(t))}).catch(function(n){console.error(n)})})}function i(n){var i=11,t;return n.length<i?n:(t=n.indexOf(" "),t!=-1&&t<i)?n.substr(0,t):n.substr(0,i)}function r(t){return new Promise(function(r){artistInfoModel.isLoggedIn(!0);n.setAccessToken(t);localStorage.setItem("ae_token",t);localStorage.setItem("ae_expires",(new Date).getTime()+36e5);n.getMe().then(function(t){artistInfoModel.userId(t.id);artistInfoModel.displayName(i(t.display_name));artistInfoModel.userImage(t.images[0].url);localStorage.setItem("ae_userid",t.id);localStorage.setItem("ae_display_name",t.display_name);localStorage.setItem("ae_user_image",t.images[0].url);currentApi=n;r(checkArtistExplorerPlaylistExists(artistInfoModel.userId(),0,50))})})}var u=new localProxyApi(serverBasePath),n=new SpotifyWebApi;window.AE={getSuitableImage:getSuitableImage,getRelated:getRelated,getArtistsForGenre:getArtistsForGenre,getInfoCancel:getInfoCancel,getInfo:getInfo,changeNumberOfArtists:changeNumberOfArtists,setRepeatArtists:setRepeatArtists,toTitleCase:toTitleCase,artistInfoModel:artistInfoModel,login:t,createPlaylistModal:createPlaylistModal,createPlaylist:createPlaylist,logout:logout}});